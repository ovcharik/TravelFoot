mixin sight(sight)
  .panel.panel-default
    .panel-heading
      h3.panel-title
        a(href="/show/"+sight._id)
          = sight.name.capitalize()
    .panel-body
      - var cid = "carousel-" + sight._id
      .carousel.slide.col-sm-5(id=cid, data-ride="carousel", data-interval="false")
        - count = sight.images.length
        .carousel-inner
          - var first = true
          if count == 0
            - sight.images.push({url: "/images/nophoto", ext: "png"})
          - each img in sight.images
            .item(class=(first?"active":""))
              - var url = img.url + "-middle." + img.ext
              img(src=url, width="100%")
            - first = false
        
        if count > 1
          a.left.carousel-control(href="#"+cid, data-slide="prev")
            span.glyphicon.glyphicon-chevron-left
          a.right.carousel-control(href="#"+cid, data-slide="next")
            span.glyphicon.glyphicon-chevron-right
      
      .col-sm-7
        p
          = sight.description
    .panel-footer
      ul.fa-ul
        li
          i.fa.fa-li.fa-building-o
          = sight.address.city
          = ((sight.address.city && sight.address.street) && ", " || " ")
          = sight.address.street
          = ((sight.address.street && sight.address.house) && ", " || " ")
          = sight.address.house
        li
          i.fa.fa-li.fa-globe
          = sight.coord.join(", ")
        li
          i.fa.fa-li.fa-tags
          - for (var i = 0; i < sight.tags.length; i++)
            - tag = sight.tags[i]
            //a(href=pagination.path, params_safe="true", params_add="tag="+tag._id)=tag.value
            =tag.value
            if i != sight.tags.length - 1
              | ,&nbsp;
